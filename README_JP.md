🇯🇵 MOODÉA – README（日本語版）

スキンケア・ビューティー製品を販売する React ベースの EC サイト プロジェクトです。
実際のショッピングサイトに近いレイアウトやインタラクションを再現し、
UI/UX 設計、コンポーネント構造化、データ連携まで、**実務に近い開発フロー を経験する目的で制作しました。**


---

## 🧴 プロジェクト概要
- **コンセプト:** スキンケアおよびビューティー製品を販売するウェブサイト  
- **目的:** フロントエンド開発の実務感覚向上と、コンポーネント再利用構造の習得  
- **期間:** 2025.09 ~ 現在進行中  
- **使用技術:** React, React Hooks, React Router, Vite, Supabase, JavaScript(ES6), CSS3 / Swiper.js

---


## 更新履歴
### 2025-12-16
- 注文履歴ページのページネーション： React Routerを用いたページネーション実装（前のページ／次のページ）

## フォルダ構成

```
src/
 ├─ components/
 │    ├─ main/               # トップページ専用コンポーネント
 │    │   ├─ CarouselSlider.jsx
 │    │   ├─ NewProductList.jsx
 │    │   └─ ...
 │    ├─ HeaderSectionCategory/           # ヘッダーセクションカテゴリ（コンポーネント制作所）
 │    │   ├─ Skincare/
 │    │   │   └─ SkincareList.jsx
 │    │   └─ category.css
 │    │   
 │    ├─ common/             # 共通 UI コンポーネント
 │    │   ├─ AdPopup.jsx
 │    │   ├─ Footer.jsx
 │    │   └─ ...
 │    └─ Recycling/          # 再利用コンポーネント
 │        └─ BestSlider.jsx
 │        └─ HeaderSectionCategory.jsx
 │        └─ ProductDetail.jsx   
 │        └─ ProductDetail.css 
 │        └─ ProductDetailPage.jsx <= # URL パラメータ + props を受け取り ProductDetail にバインド
 │
 └─ pages/     # CATEGORY PAGE 
     ├ Detail/       # 商品詳細ページ
     │      └─ NewProductListDetail.jsx
     │      └─ BestSellerDetail.jsx
     │      └─ index.js
     │     
     ├─Login # LOGIN PAGE
     │   └─ LoginPage.jsx
     │   └─ LoginPage.css
     │
     ├─Signup # SIGN UP PAGE
     │   └─ SignupPage.jsx
     │   └─ SignupPage.css
     │
     ├─ MainPage.jsx
     ├─ SkincarePage.jsx
     ├─ CleansingPage.jsx
     └─ MakeupPage.jsx
     └─ HaircarePage.jsx
     └─ SuncarePage.jsx

└─ utils/
     └─ cart.js    # カート用カスタムフック
```


```

## コンポーネント制作フロー

1. 専用コンポーネントを作成
   - 各ページ／機能に特化したコンポーネントを作成
   - 例: SkincareList.jsx

2. 再利用可能な形へリファクタリング
   - 共通化できる UI／ロジックを抽出し、props で制御可能な汎用コンポーネントに再構成
   - 例: HeaderSectionCategory.jsx（categoryName, categoryBio, jsonFile など）

3. ページ側でデータをバインドし、画面を構成
   - Supabase から取得したデータを Recycling コンポーネントへ渡してページを構築


```

## 実装機能（MYPAGE）
- 上部メニュー：新規会員登録、ログイン、注文照会、お気に入り、カスタマーサポート など
- 翻訳機能：GTranslate プラグインを利用した 4ヶ国語対応の自動翻訳ウィジェットを追加
- ヘッダーセクション：サイトタイトルおよび商品カテゴリ（スキンケア、クレンジング、メイクアップ、ヘアケア、ボディケア）
- クーポンポップアップ：新規会員登録時に割引クーポンを案内し、チェックボックスでウィンドウを閉じる機能を実装
- カルーセルスライダー：イメージバナーがスライドし、インジケータークリックで移動可能
- カテゴリセクション：Supabase DB のデータを基にカテゴリ一覧を表示
- 新商品セクション：Supabase DB のデータを基に新商品一覧を表示
- もっと見るボタン：クリックすると商品を10件ずつ追加ロード（最大2回まで、2回目以降はボタン非表示）
- ベストセラーセクション：Swiper ライブラリを活用し、ベスト商品カードをスライド形式で実装
- ギフトセットセクション：バナーと横スクロール型の商品リストを配置し、ギフトセットを一目で確認できる構成を実現
- ブランドストーリーセクション：IntersectionObserver API を使ったスクロール時のオン／オフアニメーションを実装
- レビューセクション：カード形式で商品写真、レビュー内容、ユーザー名、星評価を表示し、「すべてのレビューを見る」ボタンを追加
- ソーシャルメディアセクション：Display Grid を用いて画像を分割し、ブランドの Instagram へ遷移するリンクを配置
- フッターセクション：フッターエリアを実装
- レスポンシブレイアウト：画面サイズに応じてカルーセルや商品セクションの高さ・配置を調整
- レンダリング UI：レンダリング時に表示される簡易ローディング UI を実装

## 実装機能（ヘッダーセクション）
- 商品並び替え機能：商品名順、価格の安い順、価格の高い順、おすすめ順のフィルタリング機能を実装
- ページネーション機能：React Router を利用したページネーション（1・2・3ページ）を実装
- スキンケア・クレンジング・メイクアップ・ヘアケア・ボディケアページの実装：コンポーネント再利用とデータバインディングを活用したページ構築

## 実装機能（カテゴリセクション）
- カテゴリ基盤のページ遷移機能の実装：カテゴリをクリックすると、Supabase の basePath を基に該当ページへ遷移し、ページ切り替え時にはスクロールを最上部にリセットするよう実装
- 香水ページの実装：コンポーネント再利用とデータバインディングを活用したページ構築
- サンケアページの実装：コンポーネント再利用とデータバインディングを活用したページ構築
- マスクパックページの実装：コンポーネント再利用とデータバインディングを活用したページ構築

## 実装機能（ギフトセットセクション）
- ギフトセットページの実装：コンポーネント再利用とデータバインディングを活用したページ構築

## 実装機能（商品詳細ページ）
- 商品詳細ページの実装：再利用可能な商品詳細コンポーネント（ProductDetail.jsx）を作成し、どのコンポーネントでもデータバインディングを行うだけで詳細ページが完成するように実装
- 機能実装1：商品の数量選択と、数量に応じた合計金額の自動計算機能を実装
- 機能実装2：商品詳細ページのタブをクリックした際、選択されたタブのみ active を付与し、色が変わるタブ切り替え機能を実装
- 「もっと見る」ボタンの実装：詳細情報の「もっと見る」ボタンを条件付きレンダリングで実装し、モックアップ画像を挿入
- 詳細ページ遷移：すべての商品詳細ページに URL パラメータを利用して接続・移動できるように実装
- モーダル実装：未ログイン状態で購入・カート追加・お気に入りをクリックした場合、ログインが必要である旨を知らせるモーダルを表示
- Toss Payments API 連携 ＆ 商品詳細ページでの決済機能：ユーザーが「決済する」ボタンをクリックすると、決済情報（金額・注文番号 など）を payment.js に渡し、そのデータを基に Toss Payments 決済 API を呼び出して決済画面を表示

## 実装機能（ログイン & 新規会員登録）
- ログイン UI 実装：ログイン画面の UI を実装
- 新規会員登録 UI 実装：会員登録画面の UI を実装
- 会員登録入力フォームのバリデーション（正規表現）：メールアドレス形式チェック & パスワード 8文字以上 & 生年月日 6桁入力 & 空白入力の禁止 & 生年月日は数字のみ入力可能
- 会員登録条件ロジック：すべての入力が条件を満たさない場合、会員登録ボタンを押しても登録できないよう制御
- 重複チェックロジック：メールアドレス・ニックネームの重複確認機能を実装
- 会員登録ロジック①：全ての項目を正しく入力後、会員登録ボタンを押すと Supabase DB にデータ送信＆登録成功処理を実行
- 会員登録ロジック②：メールまたはニックネームを変更した場合、重複確認状態をリセットし、再度チェックが必要
- 会員登録ロジック③：重複確認が完了している状態でのみ登録可能
- Auth サーバーへのアカウント作成リクエスト：会員登録時、メール／ニックネーム重複チェック → バリデーション → Auth アカウント作成 → users テーブルへ情報保存
- ログインロジック実装：supabase.auth.signInWithPassword() を使用し、入力された値を state に保存 → Supabase サーバーで検証 → 初回登録時はメール認証後にログイン可能
セッション維持 & ログアウト実装：ログイン時、セッションを localStorage に保存し、その値を変数として管理 ログアウト時、セッションを null にしてログアウト処理を実行 条件付きレンダリングで、ログイン時は「会員登録・ログイン」 menuを非表示にし、ログアウト時、 また表示

## 実装機能（カート） ※ログイン時のみアクセス可能
- カートページ UI 作成：カートページの UI を実装
- カート機能実装1：未ログイン状態で CART ボタンをクリックすると、ログインが必要である旨のモーダルを表示。ログイン時のみカート処理を実行
- カート機能実装2：カート商品重複チェックロジックを実装。同一商品が既に存在する場合は quantity のみ増加し、存在しない場合は insert で Cart テーブルに商品情報を保存
- カート機能実装3：Cart テーブルからデータを取得し、map を利用して商品一覧をレンダリング
- カート機能実装4：Supabase の delete 機能を接続。削除クリック時、該当商品の id を条件に Cart テーブルの row を削除し、state でもフィルタリングして即時画面に反映
- カート機能実装5：最終決済金額モーダルにて「総額・商品総数・5万円以上で送料無料」を reduce メソッドで計算するロジックを実装
- カート機능実装6：Math.floor を使用し、総額を 1000 で割った際の切り捨てを利用して「1000円ごとに10ポイント付与」ロジックを実装
- カート機能実装7：新規会員登録時にクーポン発行機能を実装 Supabase の user_coupons テーブルに insert でクーポンを付与し、該当ユーザーの保有クーポン数を取得して My Page にデータバインディング
- クーポン／ポイント使用モーダル：ボタンクリック時、条件付きレンダリングで state を true にし、モーダルを表示 + UI 作成
- クーポン／ポイントモーダル機能実装⑧：Supabase DB の保有クーポン／ポイントをデータバインディングし、ポイント入力欄には数字のみ入力可能な正規表現を適用
- クーポン／ポイントモーダル機能実装⑨：「全て使用」ボタン押下時、保有ポイントを state に反映し、その値を input value にバインディング
- クーポン／ポイントモーダル機능実装⑩：if 文を用い、保有ポイントに応じて「適用」ボタン押下時に alert を表示する簡易処理を実装
- クーポン／ポイントモーダル機能実装⑪：適用された割引情報を state に保存し、最終決済金額モーダルにリアルタイムで反映
- カート決済機能実装：ユーザーがカートページで「購入する」ボタンを押すと、カートに入っている全商品情報を基に注文名生成・総決済金額（商品価格＋送料−クーポン／ポイント割引）などを計算し、
そのデータを payment.js に渡して Toss Payments の決済画面を起動するように実装
- カート用カスタムフック作成 : 既存の長かったカート処理コードを cart.js に分離し、importして再利用

## マイページ（ログイン時のみアクセス可能）
- マイページ作成：マイページのデザインを実装
- クーポン／ポイントのデータバインディング：Supabase に保存されているクーポン／ポイント数を取得し、保有数に応じてバインディング
- カートデータのバインディング：カート商品用の再利用コンポーネントを作成し、props としてマイページへ渡してデータをバインディング
- 総購入金額表示機能：DB に保存された決済金額データを取得し、reduce メソッドで合計金額を算出してマイページに表示
- 最近購入した商品データのバインディング：購入商品を DB に保存し、マイページの「最近購入した商品」UI にデータを読み込んで表示する機能を実装
- 最近購入した商品の UI レイアウト統一：カート・マイレビュー UI と同じ構造／間隔に再調整し、マイページ全体のデザイン一貫性を向上
- マイページのカート並び替え修正：並び順を id → created_at の降順へ変更し、カート UI が実際に追加された時間順で正しく表示されるよう改善
- マイページのプロフィール画像変更： Supabase Storageを利用してアップロードした画像をStorageからURLとして取得し、stateに保存してデータバインディングを実装

## ウィッシュリスト（ログイン時のみアクセス可能）
- ウィッシュリストページ UI：UI を実装完了（ユーザーセッションを参照し、いいねした商品の数をデータバインディング）
- ウィッシュリストボタンの有効化：ウィッシュリストボタンをクリックすると、Supabase の Wishlist テーブルに insert し、ウィッシュリストページへデータをバインディングして UI にリアルタイムで反映
- カートに追加：ウィッシュリストに入っている商品を、ウィッシュリストページのカートボタンから Cart テーブルへ insert し、カートへ追加するロジックを実装
- ウィッシュリストアイテム削除ボタン：ウィッシュリストページで削除ボタンをクリックすると delete を実行し、Wishlist テーブルのデータを削除。その後 state も更新し、UI をリアルタイムで反映するロジックを実装

## 決済機能（ログイン時のみ利用可能）
Toss Payments API 連携 ＆ 商品詳細ページでの決済実装：ユーザーが決済ボタンをクリックすると、決済情報（金額・注文番号など）を payment.js に渡し、そのデータを基に Toss Payments 決済 API を呼び出して決済画面を起動
決済成功ページ UI：決済成功時に表示するページ UI を実装
決済失敗ページ UI：決済失敗時に表示するページ UI を実装
Edge Function API 設定：購入商品情報を Supabase サーバーへ安全に送信するための環境構築および Supabase 設定
総購入金額表示機能：API を通じて DB に保存された決済金額を取得し、クライアント側で fetch GET によりユーザーの決済履歴を取得後、reduce メソッドで合計金額を算出してマイページにバインディング
カート決済機能実装：ユーザーがカートページで「購入する」ボタンをクリックすると、カート内全商品の情報を基に注文名を生成し、総決済金額（商品価格＋送料−クーポン／ポイント割引など）を計算。そのデータを payment.js に渡して Toss Payments の決済画面を起動するように実装
決済金額検証ロジックの実装：決済開始時に金額を DB に事前保存し、クライアント側の改ざんを防止。決済完了後、DB 金額 vs Toss 決済金額、クライアント金額 vs Toss 決済金額 の 2 段階で検証を行う仕組みを実装

## 注文一覧（ログイン時のみ利用可能）
- 注文一覧UIおよびデータバインディング：注文一覧UIの完成＋購入した商品のデータバインディング
- 注文履歴検索機能 : inputのvalue値をstateに保存し、Ordersテーブルにある商品名とstateに保存された商品,商品名が同じ場合、その商品だけをバインディングする
- 注文履歴ページのページネーション： React Routerを用いたページネーション実装（前のページ／次のページ）

## レビュー掲示板
- レビュー掲示板 UI：レビュー掲示板の UI を実装（完了） ※ 今後、機能追加予定

## 使用技術
- **React** 
- **Vite** 
- **React Router**
- **CSS / JSX** 
- **JavaScript (ES6)**
- **Font Awesome & Google Fonts**
- **Supabase**

## 企画
| ワイヤーフレーム | デザイン案 |
|---|---|
|<img width="500" alt="ワイヤーフレーム" src="https://raw.githubusercontent.com/ouusagi/MOODEA/main/src/assets/Wireframe-mainpage.png" />|<img width="700" alt="デザイン案" src="https://raw.githubusercontent.com/ouusagi/MOODEA/main/src/assets/mainpage.png" />|

## インストールと実行
```bash
# パッケージの実行
npm install

# 開発サーバーの実行
npm run dev

# 問題事項+問題解決
⚠️ Known Issues1
1. 言語変更後、商品数の変更時に計算ロジックが動作しない
（GTranslate による DOM 直接操作の影響）＝ 外部プラグインによる問題
2. ログインページに移動後、メインページへ戻ると言語切替ウィジェットが消える
（リロードすると再表示される。SPA 環境では再初期化が不可）＝ 外部プラグインによる問題
3. confirm() が時々遅延して反応する
（React の非同期レンダリング構造との衝突）
✅ 解決策：カスタムモーダル UI に切き替え

⚠️ Known Issues2
Supabase Auth の signUp 時、既に存在するメールアドレスに対してエラーが返されず、サーバー側で重複登録の有無を即時に確認できない問題
✅ 解決策 : Supabase の users テーブルに email カラムを追加し、会員登録前にメールアドレスの重複を手動で照会して確認
            重複している場合は alert を表示して登録をブロック重複していない場合のみ登録処理を実行 
            Auth が提供していないメール重複チェック機能を、users テーブルの照会 + チェックボタンの状態管理によって実装

⚠️ Known Issues3
Toss Payments 決済 API 連携中の SDK 衝突
- コンパイル段階でモジュール読み込みエラーが発生
- 決済ウィンドウを呼び出せない
- 決済ウィンドウ実行関数の呼び出し時にエラーが発生
✅ 解決策 : 方式に切り替え
→ React(vite) 環境と Toss Payments SDK のバージョン間の非互換が原因のため、CDN 方式で代替


⚠️ 現在のプロジェクトは未完成の状態であり、一部の UI / 機能は実装中です。
